<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="../assets/css/owner_profile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;800&family=Barlow:wght@400;700&family=Outfit:wght@300&family=Roboto+Mono:ital,wght@0,300;1,300&family=Roboto+Slab:wght@300&family=Space+Mono:wght@700&display=swap"
        rel="stylesheet">
</head>

<script src="../assets/JS/index.js"></script>
<script src="../assets/JS/profile.js"></script>

<body>
    <!-- This is worker profile -->
    <section>
        <div class="fullprofile">
            <div>
                <div class="blue">

                </div>
                <div class="white">

                </div>

                <div class="profile">
                    <div class="profileDiv">

                    </div>
                </div>
            </div>
            <div class="second_div_profile">
                <div class="datas">

                </div>
                <div class="top_icons">
                    <div class="icons"> <img src="../assets/Images/phone_new.svg" alt="image" />
                    </div>
                    <div class="icons">
                        <img src="../assets/Images/linkedin (1).svg" alt="image" />
                        <p>Linkedin</p>
                    </div>
                    <div class="icons">
                        <img src="../assets/Images/instagram-logo.svg" alt="image" />
                        <p>Instagram</p>
                    </div>
                    <div class="icons" id="gmail">
                        <img src="../assets/Images/gmail (1).svg" alt="image" />
                    </div>
                </div>
            </div>
        </div>

        <button onclick='back()'>Back</button>
        <a class="edit" onclick="navEdit()">Edit</a>
        <a class="delete" onclick="deleteUser()">Delete User</a>
    </section>

    <script>
        // To get the url datas

        let url = location.search;
        let urlParams = new URLSearchParams(url);
        let from = urlParams.get("from");
        let type = urlParams.get("type");
        console.log(from + type);



        // To get the bio data in localstorage
        let BIO = JSON.parse(localStorage.getItem("BIO"));
        console.log(BIO);

        let Email = "";


        // To find the email of the user
        if (from == "logIn") {
            let logIn = JSON.parse(localStorage.getItem("Login"));
            Email = logIn["Email"];
            console.log(Email)
            console.log("logIn")

        }

        else {

            if (type == "owner") {
                let register = JSON.parse(localStorage.getItem("register"));
                // console.log(register)
                Email = register[register.length - 1]["Email"]
                console.log(Email);
                console.log("Register")
            }
            else {
                let workerRegister = JSON.parse(localStorage.getItem("workerRegister"));
                // console.log(register)
                Email = workerRegister[workerRegister.length - 1]["Email"]
                console.log(Email);
                console.log("workerRegister")
            }
        }

        // To find the current user bio data in alluser bio with email
        let userBio = BIO.find(B => B.Email == Email)
        // With finded biodata create the user profile 
        let gmail = document.createElement("p");
        gmail.innerText = userBio["Email"];
        document.querySelector("#gmail").append(gmail);

        let expertIn = document.createElement("p");
        expertIn.innerHTML = "<span>Expert In :  </span>" + userBio.Expect_in;
        expertIn.setAttribute("class", "second_div_profile_p")
        document.querySelector(".datas").prepend(expertIn);

        let Current_occupation = document.createElement("p");
        Current_occupation.innerHTML = "<span>Current_occupation :  </span>" + userBio.Current_occupation;
        expertIn.setAttribute("class", "second_div_profile_p")
        document.querySelector(".datas").prepend(Current_occupation);


        let Education = document.createElement("p");
        Education.innerHTML = "<span>Education :  </span>" + userBio.Education;
        expertIn.setAttribute("class", "second_div_profile_p")
        document.querySelector(".datas").prepend(Education);

        let Address = document.createElement("p");
        Address.innerHTML = "<span>Address :  </span>" + userBio.Address;
        expertIn.setAttribute("class", "second_div_profile_p")
        document.querySelector(".datas").prepend(Address);


        let DOB = document.createElement("p");
        DOB.innerHTML = "<span>DOB :  </span>" + userBio.DOB;
        expertIn.setAttribute("class", "second_div_profile_p")
        document.querySelector(".datas").prepend(DOB);


        let Name = document.createElement("p");
        Name.innerHTML = "<span>Name :  </span>" + userBio.FN + userBio.LN;
        expertIn.setAttribute("class", "second_div_profile_p")
        document.querySelector(".datas").prepend(Name);

        let phone = document.createElement("p");
        phone.innerHTML = `${userBio["Phone"]}`;
        document.querySelector(".icons").append(phone);

        // Profile Name

        let profileDiv = document.querySelector(".profileDiv");
        let profileDivImg = document.createElement("img");
        profileDivImg.setAttribute("src", profileImg(userBio.FN, userBio.LN));
        profileDivImg.setAttribute("alt", "ProfileImage");

        profileDiv.append(profileDivImg);




    </script>

</body>

</html>